(this["webpackJsonpcovid-19-info"]=this["webpackJsonpcovid-19-info"]||[]).push([[4],{237:function(e,t,a){},239:function(e,t,a){},394:function(e,t,a){},395:function(e,t,a){},408:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return U}));var n,r,c=a(1),l=a(7),i=a(2),o=a(4),s=a(106),d=a(401),u=a(410),b=a(406),v=a(392),j=a(393),h=a(399),m=a(391),O=a(389),f=a(231),p=a(51);var x=["title","titleId"];function g(){return g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},g.apply(this,arguments)}function y(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function k(e,t){var a=e.title,l=e.titleId,i=y(e,x);return c.createElement("svg",g({width:24,height:24,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":l},i),a?c.createElement("title",{id:l},a):null,n||(n=c.createElement("defs",null,c.createElement("path",{id:"ic_chevron_1",d:"M7.41 8.58L12 13.17l4.59-4.59L18 10l-6 6-6-6z"}))),r||(r=c.createElement("g",{fill:"none",fillRule:"evenodd"},c.createElement("mask",{id:"ic_chevron_2",fill:"#fff"},c.createElement("use",{xlinkHref:"#ic_chevron_1"})),c.createElement("g",{mask:"url(#ic_chevron_2)",fill:"#57585A"},c.createElement("path",{d:"M0 0h24v24H0z"})))))}var C=c.forwardRef(k),N=(a.p,a(52)),w=(a(237),a(0)),S=Object(i.a)("dropdown");function D(e){var t=e.options,a=e.label,n=e.disabled,r=e.icon,l=e.onClick,s=e.onOptionClick,d=e.value,u=e.onChange,b=e.theme,v=e.loadingOptions,j="dark"===b?Object(i.a)("dropdown",b):S,h=Object(c.useState)(!1),m=Object(o.a)(h,2),O=m[0],f=m[1],x=Object(c.useCallback)((function(){l&&l(),f((function(e){return!e}))}),[l]),g=Object(c.useCallback)((function(){f(!1)}),[]),y=Object(c.useCallback)((function(e){s&&s(e.value),g()}),[s,g]),k=function(e){var t=Object(c.useRef)(null),a=Object(c.useCallback)((function(a){t.current&&null!==a.target&&(t.current.contains(a.target)||e(a))}),[t,e]);return Object(c.useEffect)((function(){return document.addEventListener("mousedown",a,!0),document.addEventListener("touchstart",a,!0),function(){document.removeEventListener("mousedown",a,!0),document.removeEventListener("touchstart",a,!0)}}),[a]),t}((function(){g()}));return Object(w.jsxs)("div",{className:j({opened:O}),ref:k,children:[O&&Object(w.jsxs)("div",{className:j("list-wrapper"),children:[u&&Object(w.jsx)(N.a,{className:j("input"),value:d,onChange:function(e){return u(e)}}),Object(w.jsxs)("ul",{children:[v&&Object(w.jsx)("div",{className:j("list-item"),children:"loading..."}),t.map((function(e,t){return Object(w.jsx)(E,{option:e,onSelect:y,className:j("list-item")},t)}))]})]}),Object(w.jsxs)(p.a,{disabled:n,className:j("btn",{expand:O}),onClick:x,children:[r&&Object(w.jsx)("span",{className:j("btn-icon"),children:r}),Object(w.jsx)("span",{className:j("btn-text"),children:a}),Object(w.jsx)(C,{})]})]})}function E(e){var t=e.option,a=e.onSelect,n=e.className,r=Object(c.useCallback)((function(){a(t)}),[t,a]);return Object(w.jsx)("li",{className:n,onClick:r,children:t.label})}D.defaultProps={label:""};var P=a(39),_=a(5);function M(){return Object(c.useContext)(_.e).match.params}var L=a(20),A=a(12),W=a.n(A),R=a(14),z=a.n(R),I=a(22),K=a(36),B=a(3),F=a(238),H=a.n(F);function J(e){var t={Country:e[0].Country,CountryCode:e[0].CountryCode,data:e.map((function(e,t,n){return{ID:e.ID,Date:H()(e.Date).format("D MMM 'YY"),Active:e.Active,Confirmed:e.Confirmed,Deaths:e.Deaths,Recovered:e.Recovered,ConfirmedPerDay:a(t,e,n,"Confirmed"),DeathsPerDay:a(t,e,n,"Deaths"),ConfirmedAvgOverWeek:0,DeathsAvgOverWeek:0}}))};function a(e,t,a,n){var r=e?t[n]-a[e-1][n]:t[n];return r<0?0:r}return Object(B.a)(Object(B.a)({},t),{},{data:function(){for(var e=t.data,a=[],n=e.length-1;n>=0;n--){var r=0,c=0;n>=7&&(r=e.slice(n-7+1,n+1).reduce((function(e,t){return e+t.ConfirmedPerDay}),0)/7,c=e.slice(n-7+1,n+1).reduce((function(e,t){return e+t.DeathsPerDay}),0)/7),a[n]=Object(B.a)(Object(B.a)({},e[n]),{},{ConfirmedAvgOverWeek:Math.round(r),DeathsAvgOverWeek:Math.round(c)})}return a}()})}var Y=a(40),q=a(38);a(239);function X(e,t){var a=new RegExp("^".concat(t.toLowerCase()));return e.filter((function(e){return e.Country.toLowerCase().match(a)})).map((function(e){return{label:e.Country,value:e.Slug}}))}function G(){var e,t=Object(c.useContext)(l.a).theme,a=Object(i.a)("summary-to-country-chart",t),n=Object(s.a)().t,r=M().slug,p=Object(c.useState)(""),x=Object(o.a)(p,2),g=x[0],y=x[1],k=Object(c.useState)(183),C=Object(o.a)(k,2),N=C[0],S=C[1],E=Object(c.useState)("ConfirmedPerDay"),_=Object(o.a)(E,2),A=_[0],R=_[1],B=Object(Y.a)(),F=B.getCountries,H=B.countries,G=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(!1),l=Object(o.a)(r,2),i=l[0],s=l[1],d=Object(c.useState)(!1),u=Object(o.a)(d,2),b=u[0],v=u[1],j=function(){var e=Object(I.a)(z.a.mark((function e(){var t,a,r,c,l=arguments;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:"ru",i&&s(!1),v(!0),e.prev=3,a="/dayone/country/".concat(t),e.next=7,K.a.get(a);case 7:r=e.sent,c=J(r),n(c),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),s(!0);case 15:return e.prev=15,v(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(){return e.apply(this,arguments)}}();return{chartData:a,loading:b,error:i,getDayOneStat:j}}(),Q=G.chartData,T=G.getDayOneStat,U=G.loading,V=Object(q.b)().getStat,Z=(null===Q||void 0===Q?void 0:Q.data.slice(-N))||[],$=[{label:n("chart.options.confirmed"),value:"ConfirmedPerDay"},{label:n("chart.options.deaths"),value:"DeathsPerDay"}],ee=[{label:n("chart.options.all_time"),value:0,labelShort:"all"},{label:n("chart.options.2week"),value:14,labelShort:"2W"},{label:n("chart.options.30days"),value:30,labelShort:"M"},{label:n("chart.options.3months"),value:93,labelShort:"3M"},{label:n("chart.options.6months"),value:183,labelShort:"6M"}];Object(c.useEffect)((function(){T(r),F()}),[]);var te,ae=window.innerWidth>=768?null===Q||void 0===Q?void 0:Q.Country:null===Q||void 0===Q?void 0:Q.CountryCode;return Object(w.jsxs)("div",{className:a("container"),children:[Object(w.jsxs)(P.a,{className:a("dropdown-group"),children:[Object(w.jsx)(D,{label:ae||"not selected",options:X(H,g),onOptionClick:function(e){e?(L.a.push("/summary/".concat(e)),T(e),V(e)):T(r)},value:g,onChange:function(e){var t=e.target.value;y(t)},theme:t,onClick:0===H.length?F:void 0,loadingOptions:U}),Object(w.jsx)(D,{label:function(){var e=ee.find((function(e){return e.value===N}));return window.innerWidth>768?null===e||void 0===e?void 0:e.label:null===e||void 0===e?void 0:e.labelShort}(),options:ee,onOptionClick:function(e){S(e||0)},theme:t,disabled:!Boolean(null===Q||void 0===Q?void 0:Q.Country)}),Object(w.jsx)(D,{label:(null===(e=$.find((function(e){return e.value===A})))||void 0===e?void 0:e.label)||A,options:$,onOptionClick:function(e){R(e||"ConfirmedPerDay")},theme:t,disabled:!Boolean(null===Q||void 0===Q?void 0:Q.Country)})]}),Z.length>0&&Object(w.jsx)(d.a,{className:a("chart"),height:400,children:Object(w.jsxs)(u.a,{data:Z,margin:{top:0,right:50,bottom:0,left:0},children:[Object(w.jsx)(b.a,{fill:"var(--background-secondary)",stroke:"dark"===t?W.a.black60:W.a.blue}),Object(w.jsx)(v.a,{stroke:"dark"===t?W.a.gray80:W.a.black40,dataKey:"Date",scale:"band",fontSize:13,tickMargin:5,interval:"preserveStart"}),Object(w.jsx)(j.a,{stroke:"dark"===t?W.a.gray80:W.a.black40,fontSize:14}),Object(w.jsx)(h.a,{contentStyle:{backgroundColor:"var(--main-background-color)",borderColor:"var(--main-border-color)"}}),Object(w.jsx)(m.a,{name:n("chart.options.confirmed"),dataKey:A,fill:W.a.aqua}),Object(w.jsx)(O.a,{dataKey:(te=A,"ConfirmedPerDay"===te?"ConfirmedAvgOverWeek":"DeathsPerDay"===te?"DeathsAvgOverWeek":void 0),stroke:W.a.orange,name:n("chart.avg7"),type:"monotone",dot:14===N||30===N}),Object(w.jsx)(f.a,{wrapperStyle:{position:"static",fontSize:15,marginLeft:15},fontFamily:"apercu"})]})})]})}var Q=function(e,t){if(void 0===e||null===e)return"";var a="string"===typeof e?parseFloat(e):e,n=a.toString().length%3,r=a.toString().substr(0,n),c=(a.toString().substr(n).match(/.{1,3}/g)||[]).join(" "),l=[r,r.length>0?" ":"",c].join("");return(t||"").concat(l)},T=(a(394),function(){var e=Object(s.a)().t,t=M().slug,a=Object(c.useContext)(l.a).theme,n=Object(i.a)("statistics-country",a),r=Object(q.b)(),o=r.stat,d=r.getStat,u=r.loading;return Object(c.useEffect)((function(){t&&d(t)}),[]),o?Object(w.jsx)("div",{className:n("container"),children:u?Object(w.jsx)("div",{children:"Loading..."}):Object(w.jsxs)("div",{className:n("summary"),children:[Object(w.jsxs)("div",{className:n("summary-inner"),children:[Object(w.jsx)("div",{className:n("label-head"),children:null===o||void 0===o?void 0:o.continent}),Object(w.jsx)("div",{className:n("label-head"),children:null===o||void 0===o?void 0:o.country}),Object(w.jsxs)("div",{className:n("label-head"),children:[e("chart.population"),": ",Q(null===o||void 0===o?void 0:o.population)]}),Object(w.jsxs)("div",{className:n("label-mini"),children:[e("chart.updated")," ",null===o||void 0===o?void 0:o.day]})]}),Object(w.jsxs)("div",{className:n("summary-inner"),children:[Object(w.jsxs)("div",{className:n("summary-inner-row"),children:[Object(w.jsxs)("div",{className:n("summary-inner-cell"),children:[Object(w.jsx)("div",{className:n("label"),children:e("chart.new_cases")}),Object(w.jsx)("div",{className:n("mark"),children:Q(null===o||void 0===o?void 0:o.cases.total)}),Object(w.jsx)("div",{className:n("mark-light"),children:Q(null===o||void 0===o?void 0:o.cases.new,"+")})]}),Object(w.jsxs)("div",{className:n("summary-inner-cell"),children:[Object(w.jsxs)("div",{className:n("label"),children:[e("chart.cases")," (",e("chart.1_month"),")"]}),Object(w.jsx)("div",{className:n("mark"),children:Q(null===o||void 0===o?void 0:o.cases["1M_pop"])})]})]}),Object(w.jsxs)("div",{className:n("summary-inner-row"),children:[Object(w.jsxs)("div",{className:n("summary-inner-cell"),children:[Object(w.jsx)("div",{className:n("label"),children:e("chart.deaths")}),Object(w.jsx)("div",{className:n("mark"),children:Q(null===o||void 0===o?void 0:o.deaths.total)}),Object(w.jsx)("div",{className:n("mark-light"),children:Q(null===o||void 0===o?void 0:o.deaths.new,"+")})]}),Object(w.jsxs)("div",{className:n("summary-inner-cell"),children:[Object(w.jsxs)("div",{className:n("label"),children:[e("chart.cases")," (",e("chart.1_month"),")"]}),Object(w.jsx)("div",{className:n("mark"),children:Q(null===o||void 0===o?void 0:o.deaths["1M_pop"])})]})]})]})]})}):Object(w.jsx)("div",{className:n("container"),children:"No data"})});a(395);function U(){var e=Object(c.useContext)(l.a).theme,t=Object(i.a)("summary-to-country",e);return Object(w.jsx)("div",{className:t(),children:Object(w.jsxs)("div",{className:t("container"),children:[Object(w.jsx)(G,{}),Object(w.jsx)(T,{})]})})}}}]);
//# sourceMappingURL=4.c16f2dcc.chunk.js.map